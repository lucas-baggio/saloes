<div class="px-4 sm:px-6 lg:px-8 py-4 sm:py-6">
  <app-breadcrumbs [items]="breadcrumbs"></app-breadcrumbs>

  <div class="max-w-3xl mx-auto">
    <div class="mb-6 sm:mb-8">
      <h1 class="text-2xl sm:text-3xl font-bold text-gray-900">Suporte</h1>
      <p class="mt-1 sm:mt-2 text-xs sm:text-sm text-gray-600">
        Entre em contato conosco. Estamos aqui para ajudar!
      </p>
    </div>

    <div class="card">
      <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-6">
        <!-- Nome -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Nome <span *ngIf="!authService.getCurrentUser()">*</span>
          </label>
          <input
            formControlName="name"
            class="input"
            [class.bg-gray-100]="authService.getCurrentUser()"
            [disabled]="!!authService.getCurrentUser()"
            placeholder="Seu nome completo"
            [class.input-error]="
              form.get('name')?.invalid && form.get('name')?.touched
            "
          />
          <p
            *ngIf="form.get('name')?.invalid && form.get('name')?.touched"
            class="mt-1 text-sm text-red-600"
          >
            O nome é obrigatório
          </p>
          <p
            *ngIf="authService.getCurrentUser()"
            class="mt-1 text-xs text-gray-500"
          >
            Preenchido automaticamente com seus dados
          </p>
        </div>

        <!-- Email -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Email <span *ngIf="!authService.getCurrentUser()">*</span>
          </label>
          <input
            formControlName="email"
            type="email"
            class="input"
            [class.bg-gray-100]="authService.getCurrentUser()"
            [disabled]="!!authService.getCurrentUser()"
            placeholder="seu@email.com"
            [class.input-error]="
              form.get('email')?.invalid && form.get('email')?.touched
            "
          />
          <p
            *ngIf="form.get('email')?.invalid && form.get('email')?.touched"
            class="mt-1 text-sm text-red-600"
          >
            <span *ngIf="form.get('email')?.errors?.['required']"
              >O email é obrigatório</span
            >
            <span *ngIf="form.get('email')?.errors?.['email']"
              >Email inválido</span
            >
          </p>
          <p
            *ngIf="authService.getCurrentUser()"
            class="mt-1 text-xs text-gray-500"
          >
            Preenchido automaticamente com seus dados
          </p>
        </div>

        <!-- Assunto -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Assunto *
          </label>
          <input
            formControlName="subject"
            class="input"
            placeholder="Ex: Problema com agendamento, Dúvida sobre planos..."
            [class.input-error]="
              form.get('subject')?.invalid && form.get('subject')?.touched
            "
          />
          <p
            *ngIf="form.get('subject')?.invalid && form.get('subject')?.touched"
            class="mt-1 text-sm text-red-600"
          >
            <span *ngIf="form.get('subject')?.errors?.['required']"
              >O assunto é obrigatório</span
            >
            <span *ngIf="form.get('subject')?.errors?.['minlength']"
              >O assunto deve ter pelo menos 5 caracteres</span
            >
          </p>
        </div>

        <!-- Mensagem -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Mensagem *
          </label>
          <textarea
            formControlName="message"
            class="input"
            rows="8"
            placeholder="Descreva sua dúvida, problema ou sugestão em detalhes..."
            [class.input-error]="
              form.get('message')?.invalid && form.get('message')?.touched
            "
          ></textarea>
          <p
            *ngIf="form.get('message')?.invalid && form.get('message')?.touched"
            class="mt-1 text-sm text-red-600"
          >
            <span *ngIf="form.get('message')?.errors?.['required']"
              >A mensagem é obrigatória</span
            >
            <span *ngIf="form.get('message')?.errors?.['minlength']"
              >A mensagem deve ter pelo menos 10 caracteres</span
            >
          </p>
          <p class="mt-1 text-xs text-gray-500">Mínimo de 10 caracteres</p>
        </div>

        <!-- Botões -->
        <div class="flex flex-col sm:flex-row gap-3 sm:gap-4">
          <button
            type="submit"
            class="btn btn-primary flex-1"
            [disabled]="form.invalid || loading"
          >
            <span *ngIf="!loading">Enviar Mensagem</span>
            <span *ngIf="loading" class="flex items-center gap-2">
              <div
                class="inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white"
              ></div>
              Enviando...
            </span>
          </button>
          <button
            type="button"
            (click)="clearForm()"
            class="btn btn-secondary flex-1 sm:flex-initial"
            [disabled]="loading"
          >
            Limpar
          </button>
        </div>
      </form>
    </div>

    <!-- Informações de Contato -->
    <div class="mt-6 card bg-blue-50 border-blue-200">
      <div class="flex items-start gap-4">
        <div class="flex-shrink-0">
          <svg
            class="h-6 w-6 text-blue-600"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
            />
          </svg>
        </div>
        <div>
          <h3 class="text-sm font-semibold text-blue-900 mb-2">
            Informações Importantes
          </h3>
          <ul class="text-sm text-blue-800 space-y-1">
            <li>• Responderemos sua mensagem o mais rápido possível</li>
            <li>
              • Verifique se seu email está correto para receber nossa resposta
            </li>
            <li>• Para problemas urgentes, entre em contato pelo telefone</li>
            <li>• Tempo médio de resposta: 24-48 horas úteis</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
